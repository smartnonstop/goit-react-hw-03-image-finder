(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{16:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a(1),c=a.n(o),r=a(9),i=a.n(r),s=(a(16),a(8)),l=a(3),u=a(4),m=a(6),h=a(5),d={fetchImages:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return fetch("https://pixabay.com/api/?q="+e+"&page="+t+"&key=19918128-a5c1391d4f73220e8c7f95811&image_type=photo&orientation=horizontal&per_page=12").then((function(e){return e.json()})).then((function(e){return e.hits}))}},p=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={inputValue:""},e.inputHandler=function(t){e.setState({inputValue:t.target.value})},e.formSubmit=function(t){t.preventDefault(),e.props.onSearch(e.state.inputValue)},e}return Object(u.a)(a,[{key:"render",value:function(){return Object(n.jsxs)("form",{className:"SearchForm",onSubmit:this.formSubmit,children:[Object(n.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(n.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(n.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:this.state.inputValue,onChange:this.inputHandler})]})}}]),a}(o.Component);function g(e){var t=e.onSearch;return Object(n.jsx)("header",{className:"Searchbar",children:Object(n.jsx)(p,{onSearch:t})})}function j(e){var t=e.image,a=e.modalImg;return Object(n.jsx)("li",{onClick:function(){return a(t.largeImageURL)},className:"ImageGalleryItem",children:Object(n.jsx)("img",{src:t.webformatURL,alt:"",className:"ImageGalleryItem-image"})})}function b(e){var t=e.images,a=e.modalImg;return Object(n.jsx)("ul",{className:"ImageGallery",children:t.map((function(e){return Object(n.jsx)(j,{modalImg:a,image:e},e.id)}))})}var f=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){console.log("Button didmount, page: "+this.props.page)}},{key:"shouldComponentUpdate",value:function(e){return 2!==e.page}},{key:"componentDidUpdate",value:function(){console.log("Button didupdate, page: "+this.props.page),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}},{key:"render",value:function(){return Object(n.jsx)("button",{className:"Button",onClick:this.props.click,children:"Load more"})}}]),a}(o.Component),O=a(10),v=a.n(O),y=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return Object(n.jsx)("div",{className:"centerdLoader",children:Object(n.jsx)(v.a,{type:"ThreeDots",color:"#3f51b5",height:80,width:80})})}}]),a}(c.a.Component),x=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).handleEscape=function(t){"Escape"===t.code&&e.props.onClose()},e.handleClickClose=function(t){console.log(t),"Overlay"===t.target.className&&e.props.onClose()},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleEscape),window.addEventListener("click",this.handleClickClose)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleEscape),window.removeEventListener("click",this.handleClickClose)}},{key:"render",value:function(){return Object(n.jsx)("div",{className:"Overlay",children:Object(n.jsx)("div",{className:"Modal",children:Object(n.jsx)("img",{src:this.props.modalImg,alt:""})})})}}]),a}(o.Component),S=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={searchQuery:"",images:[],page:1,modalImg:"",isLoading:!1,error:null},e.handleSearchForm=function(t){e.setState({searchQuery:t,images:[],page:1})},e.fetchImages=function(){var t=e.state,a=t.searchQuery,n=t.page;e.setState({isLoading:!0}),d.fetchImages(a,n).then((function(t){e.setState((function(e){return{images:[].concat(Object(s.a)(e.images),Object(s.a)(t)),page:e.page+1}}))})).catch((function(t){return e.setState({error:t})})).finally((function(){return e.setState({isLoading:!1})}))},e.setModalImg=function(t){e.setState({modalImg:t})},e.modalClose=function(){e.setState({modalImg:""})},e}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(e,t){t.searchQuery!==this.state.searchQuery&&this.fetchImages()}},{key:"render",value:function(){var e=this.state,t=e.page,a=e.images,o=e.modalImg,c=e.error,r=e.isLoading;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(g,{onSearch:this.handleSearchForm})}),Object(n.jsx)(b,{images:this.state.images,modalImg:this.setModalImg}),""!==o&&Object(n.jsx)(x,{modalImg:o,onClose:this.modalClose}),r&&Object(n.jsx)(y,{}),c&&Object(n.jsx)("p",{children:"Something go bad, please reload page..."}),a.length>0&&Object(n.jsx)(f,{page:t,click:this.fetchImages})]})}}]),a}(o.Component);i.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(S,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.a1661932.chunk.js.map